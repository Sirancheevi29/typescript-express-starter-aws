{"version":3,"sources":["../../src/tests/users.test.ts"],"sourcesContent":["import request from 'supertest';\nimport App from '@/app';\nimport { CreateUserDto } from '@dtos/users.dto';\nimport { User } from '@interfaces/users.interface';\nimport userModel from '@models/users.model';\nimport UserRoute from '@routes/users.route';\n\nafterAll(async () => {\n  await new Promise<void>(resolve => setTimeout(() => resolve(), 500));\n});\n\ndescribe('Testing Users', () => {\n  describe('[GET] /users', () => {\n    it('response statusCode 200 / findAll', () => {\n      const findUser: User[] = userModel;\n      const usersRoute = new UserRoute();\n      const app = new App([usersRoute]);\n\n      return request(app.getServer()).get(`${usersRoute.path}`).expect(200, { data: findUser, message: 'findAll' });\n    });\n  });\n\n  describe('[GET] /users/:id', () => {\n    it('response statusCode 200 / findOne', () => {\n      const userId = 1;\n      const findUser: User = userModel.find(user => user.id === userId);\n      const usersRoute = new UserRoute();\n      const app = new App([usersRoute]);\n\n      return request(app.getServer()).get(`${usersRoute.path}/${userId}`).expect(200, { data: findUser, message: 'findOne' });\n    });\n  });\n\n  describe('[POST] /users', () => {\n    it('response statusCode 201 / created', async () => {\n      const userData: CreateUserDto = {\n        email: 'example@email.com',\n        password: 'password',\n      };\n      const usersRoute = new UserRoute();\n      const app = new App([usersRoute]);\n\n      return request(app.getServer()).post(`${usersRoute.path}`).send(userData).expect(201);\n    });\n  });\n\n  describe('[PUT] /users/:id', () => {\n    it('response statusCode 200 / updated', async () => {\n      const userId = 1;\n      const userData: CreateUserDto = {\n        email: 'example@email.com',\n        password: 'password',\n      };\n      const usersRoute = new UserRoute();\n      const app = new App([usersRoute]);\n\n      return request(app.getServer()).put(`${usersRoute.path}/${userId}`).send(userData).expect(200);\n    });\n  });\n\n  describe('[DELETE] /users/:id', () => {\n    it('response statusCode 200 / deleted', () => {\n      const userId = 1;\n      const deleteUser: User[] = userModel.filter(user => user.id !== userId);\n      const usersRoute = new UserRoute();\n      const app = new App([usersRoute]);\n\n      return request(app.getServer()).delete(`${usersRoute.path}/${userId}`).expect(200, { data: deleteUser, message: 'deleted' });\n    });\n  });\n});\n"],"names":["afterAll","Promise","resolve","setTimeout","describe","it","findUser","userModel","usersRoute","UserRoute","app","App","request","getServer","get","path","expect","data","message","userId","find","user","id","userData","email","password","post","send","put","deleteUser","filter","delete"],"mappings":";;;;kDAAoB;4CACJ;mDAGM;mDACA;;;;;;AAEtBA,SAAS,UAAY;IACnB,MAAM,IAAIC,QAAcC,CAAAA,UAAWC,WAAW,IAAMD,WAAW;AACjE;AAEAE,SAAS,iBAAiB,IAAM;IAC9BA,SAAS,gBAAgB,IAAM;QAC7BC,GAAG,qCAAqC,IAAM;YAC5C,MAAMC,WAAmBC,mBAAS;YAClC,MAAMC,aAAa,IAAIC,mBAAS;YAChC,MAAMC,MAAM,IAAIC,YAAG,CAAC;gBAACH;aAAW;YAEhC,OAAOI,IAAAA,kBAAO,EAACF,IAAIG,SAAS,IAAIC,GAAG,CAAC,CAAC,EAAEN,WAAWO,IAAI,CAAC,CAAC,EAAEC,MAAM,CAAC,KAAK;gBAAEC,MAAMX;gBAAUY,SAAS;YAAU;QAC7G;IACF;IAEAd,SAAS,oBAAoB,IAAM;QACjCC,GAAG,qCAAqC,IAAM;YAC5C,MAAMc,SAAS;YACf,MAAMb,WAAiBC,mBAAS,CAACa,IAAI,CAACC,CAAAA,OAAQA,KAAKC,EAAE,KAAKH;YAC1D,MAAMX,aAAa,IAAIC,mBAAS;YAChC,MAAMC,MAAM,IAAIC,YAAG,CAAC;gBAACH;aAAW;YAEhC,OAAOI,IAAAA,kBAAO,EAACF,IAAIG,SAAS,IAAIC,GAAG,CAAC,CAAC,EAAEN,WAAWO,IAAI,CAAC,CAAC,EAAEI,OAAO,CAAC,EAAEH,MAAM,CAAC,KAAK;gBAAEC,MAAMX;gBAAUY,SAAS;YAAU;QACvH;IACF;IAEAd,SAAS,iBAAiB,IAAM;QAC9BC,GAAG,qCAAqC,UAAY;YAClD,MAAMkB,WAA0B;gBAC9BC,OAAO;gBACPC,UAAU;YACZ;YACA,MAAMjB,aAAa,IAAIC,mBAAS;YAChC,MAAMC,MAAM,IAAIC,YAAG,CAAC;gBAACH;aAAW;YAEhC,OAAOI,IAAAA,kBAAO,EAACF,IAAIG,SAAS,IAAIa,IAAI,CAAC,CAAC,EAAElB,WAAWO,IAAI,CAAC,CAAC,EAAEY,IAAI,CAACJ,UAAUP,MAAM,CAAC;QACnF;IACF;IAEAZ,SAAS,oBAAoB,IAAM;QACjCC,GAAG,qCAAqC,UAAY;YAClD,MAAMc,SAAS;YACf,MAAMI,WAA0B;gBAC9BC,OAAO;gBACPC,UAAU;YACZ;YACA,MAAMjB,aAAa,IAAIC,mBAAS;YAChC,MAAMC,MAAM,IAAIC,YAAG,CAAC;gBAACH;aAAW;YAEhC,OAAOI,IAAAA,kBAAO,EAACF,IAAIG,SAAS,IAAIe,GAAG,CAAC,CAAC,EAAEpB,WAAWO,IAAI,CAAC,CAAC,EAAEI,OAAO,CAAC,EAAEQ,IAAI,CAACJ,UAAUP,MAAM,CAAC;QAC5F;IACF;IAEAZ,SAAS,uBAAuB,IAAM;QACpCC,GAAG,qCAAqC,IAAM;YAC5C,MAAMc,SAAS;YACf,MAAMU,aAAqBtB,mBAAS,CAACuB,MAAM,CAACT,CAAAA,OAAQA,KAAKC,EAAE,KAAKH;YAChE,MAAMX,aAAa,IAAIC,mBAAS;YAChC,MAAMC,MAAM,IAAIC,YAAG,CAAC;gBAACH;aAAW;YAEhC,OAAOI,IAAAA,kBAAO,EAACF,IAAIG,SAAS,IAAIkB,MAAM,CAAC,CAAC,EAAEvB,WAAWO,IAAI,CAAC,CAAC,EAAEI,OAAO,CAAC,EAAEH,MAAM,CAAC,KAAK;gBAAEC,MAAMY;gBAAYX,SAAS;YAAU;QAC5H;IACF;AACF"}